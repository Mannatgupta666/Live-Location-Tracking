<!DOCTYPE html>
<html>
  <head>
    <title>Real-time Device Location</title>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBh-_JWFESJ5MDxUbdUJ_P5xoKFEiR_LW8&callback=initMap&v=weekly" 
    async></script>
    <script>
      let map, marker;

      // Initialize the map
      function initMap() {
        // Set initial map options
        map = new google.maps.Map(document.getElementById("map"), {
          center: { lat: 28.9784, lng: 77.0330 }, // Default position (e.g., Roorkee)
          zoom: 15,
        });

        // Create a marker for the current location
        marker = new google.maps.Marker({
          map: map,
          position: { lat: 28.9784, lng: 77.0330 }, // Initial position
        });

        // Start tracking the device location
        trackDeviceLocation();
      }

      // Function to track device location
      function trackDeviceLocation() {
        if (navigator.geolocation) {
          navigator.geolocation.watchPosition(
            function (position) {
              // Get the new coordinates
              const newLat = position.coords.latitude;
              const newLng = position.coords.longitude;

              // Update the map center
              map.setCenter(new google.maps.LatLng(newLat, newLng));

              // Update the marker's position
              marker.setPosition(new google.maps.LatLng(newLat, newLng));

              // Optionally, add a message showing the coordinates
              console.log(`Current Location: ${newLat}, ${newLng}`);
            },
            function (error) {
              alert("Error getting location: " + error.message);
            },
            {
              enableHighAccuracy: true,
              maximumAge: 10000, // Refresh every 10 seconds
              timeout: 5000, // Timeout after 5 seconds
            }
          );
        } else {
          alert("Geolocation is not supported by this browser.");
        }
      }
    </script>
    <style>
      #map {
        height: 100%;
        width: 100%;
      }
    </style>
  </head>
  <body>
    <h1>Track Real-time Location</h1>
    <div id="map"></div>
  </body>
</html>

